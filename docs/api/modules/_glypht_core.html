<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>@glypht/core Â· Glypht</title>
        <link rel="icon" type="image/svg+xml" href="/favicon.svg">
        
        <link rel="canonical" href="https://glypht.valadaptive.dev/docs/api/modules/_glypht_core.html">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="color-scheme" content="dark">
        
      <script type="module" crossorigin src="/assets/search-DFKvt-Ef.js"></script>
      <link rel="stylesheet" crossorigin href="/assets/search-Bj0eNC-c.css">
      <link rel="stylesheet" crossorigin href="/assets/docs-BrMWcoVj.css">
    </head>
    <body>
        <div id="navigation-bar">
            <a href="/" class="navbar-logo">
                <span class="navbar-logo-icon"></span>
                <span class="logo-text">Glypht</span>
            </a>
            <ul class="navbar-pages">
                <li><a class="navigation-docs  active " href="/docs/">Documentation</a></li>
                <li><a class="external" href="https://github.com/valadaptive/glypht/discussions"><span class="external-link">Discussions</span></a></li>
                <li><a class="external" href="https://github.com/valadaptive/glypht"><span class="external-link">GitHub</span></a></li>
            </ul>
            <div id="search-area">
                <div id="search">
                    <input id="search-input" type="text" placeholder="Search" disabled="">
                    <button class="icon icon-button icon-close" id="search-clear" title="Clear search"></button>
                </div>
                <button class="icon icon-button icon-search" id="search-open" title="Search"></button>
            </div>
        </div>
        <div id="search-results-container"></div>
        <div id="main">
            <div class="nav-cols"><details class="navigation-details" open=""><summary class="navigation-summary">Navigation</summary><div class="navigation-sidebar"><ul><li class="navigation-sidebar-page"><details open=""><summary><a class="navigation-sidebar-entry-title" href="/docs/">Documentation</a></summary><ul><li class="navigation-sidebar-page"><details><summary><a class="navigation-sidebar-entry-title" href="/docs/api/modules/_glypht_bundler-utils.html">@glypht/bundler-utils</a></summary><ul><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/enums/_glypht_bundler-utils.NodeType.html">NodeType</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.CSSSpan.html">CSSSpan</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.CSSOutput.html">CSSOutput</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.FeatureMetadata.html">FeatureMetadata</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.FamilyInfo.html">FamilyInfo</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.SubsetAxisSetting.html">SubsetAxisSetting</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.ExportedFont.html">ExportedFont</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.CharacterSetSettings.html">CharacterSetSettings</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.FamilySubsetSettings.html">FamilySubsetSettings</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.FamilySettings.html">FamilySettings</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_bundler-utils.ExportFontsSettings.html">ExportFontsSettings</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.featureMetadata.html">featureMetadata</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.sortFontsIntoFamilies.html">sortFontsIntoFamilies</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.exportedFontsToCSS.html">exportedFontsToCSS</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.exportFonts.html">exportFonts</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.parseUnicodeRanges.html">parseUnicodeRanges</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.parseRanges.html">parseRanges</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_bundler-utils.formatUnicodeRanges.html">formatUnicodeRanges</a></li></ul></details></li><li class="navigation-sidebar-page"><details><summary><a class="navigation-sidebar-entry-title" href="/docs/api/modules/_glypht_cli.html">@glypht/cli</a></summary><ul><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_cli.GlyphtConfig.html">GlyphtConfig</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/functions/_glypht_cli.build.html">build</a></li></ul></details></li><li class="navigation-sidebar-page"><details open=""><summary><a class="navigation-sidebar-entry-title navigation-active" href="/docs/api/modules/_glypht_core.html">@glypht/core</a></summary><ul><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/enums/_glypht_core.AxisValueFormat.html">AxisValueFormat</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/enums/_glypht_core.AxisValueFlags.html">AxisValueFlags</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/classes/_glypht_core.WoffCompressionContext.html">WoffCompressionContext</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/classes/_glypht_core.GlyphtContext.html">GlyphtContext</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.CompressOptions.html">CompressOptions</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.DecompressOptions.html">DecompressOptions</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.LoadFontsOptions.html">LoadFontsOptions</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisInfo.html">AxisInfo</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsetAxisInfo.html">SubsetAxisInfo</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.StyleValue.html">StyleValue</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.FeatureInfo.html">FeatureInfo</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.NamedInstance.html">NamedInstance</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.StyleKey.html">StyleKey</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.StyleValues.html">StyleValues</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SfntVersion.html">SfntVersion</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.DesignAxisRecord.html">DesignAxisRecord</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisValueSingle.html">AxisValueSingle</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisValueRange.html">AxisValueRange</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisValueLinked.html">AxisValueLinked</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisValueMultiple.html">AxisValueMultiple</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.AxisValue.html">AxisValue</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.StyleAttributes.html">StyleAttributes</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsettedFont.html">SubsettedFont</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsetInfo.html">SubsetInfo</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsetAxisSetting.html">SubsetAxisSetting</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsetSettings.html">SubsetSettings</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.FontRef.html">FontRef</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/types/_glypht_core.SubsetName.html">SubsetName</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/api/variables/_glypht_core.SUBSET_NAMES.html">SUBSET_NAMES</a></li></ul></details></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/comparison/">Comparison with other tools</a></li><li class="navigation-sidebar-page"><a class="navigation-sidebar-entry-title" href="/docs/webapp/">Web app</a></li></ul></details></li></ul></div></details><div id="content" data-pagefind-body="true"><h1>@glypht/core</h1><div><div class="api-doc"><section class="tsd-panel tsd-typography"><div><p>A JavaScript library for subsetting and compressing font files. This library powers the <a href="https://github.com/valadaptive/glypht">Glypht web application</a> and provides a programmatic API for font processing tasks. It mainly wraps the <a href="https://github.com/harfbuzz/harfbuzz">HarfBuzz</a> and <a href="https://github.com/google/woff2">woff2</a> libraries; the former for subsetting and the latter for compression.</p>
<p>Care has been taken to ensure compatibility across platforms and JS runtimes. Browsers, Node.js, Bun, and Deno should all function. Because this library makes heavy use of WebAssembly and Web Workers, if you want to <em>bundle</em> Glypht, you'll need a bundler that recognizes and transforms the <code>new URL('...', import.meta.url)</code> and <code>new Worker(new URL('...', import.meta.url), {type: 'module'})</code> patterns (such as Vite).</p>
<p>For higher-level functionality (such as sorting fonts into groups, instancing multiple output fonts from one input font, and CSS generation), see <a href="https://www.npmjs.com/package/@glypht/bundler-utils">@glypht/bundler-utils</a>.</p>
<h2 id="installation" tabindex="-1"><a class="header-anchor" href="#installation"><span>Installation</span></a></h2>
<pre class="shiki glypht-css-variables" style="background-color:var(--hl-background);color:var(--hl-foreground)" tabindex="0"><code class="language-bash"><span class="line"><span style="color:var(--hl-function)">npm</span><span style="color:var(--hl-string)"> install</span><span style="color:var(--hl-string)"> @glypht/core</span></span></code></pre>
<h2 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start"><span>Quick Start</span></a></h2>
<p>For an example of using all this functionality end-to-end, see <a href="https://github.com/valadaptive/glypht/blob/main/glypht-cli/src/build.ts">the Glypht CLI's code</a>.</p>
<h3 id="subsetting" tabindex="-1"><a class="header-anchor" href="#subsetting"><span>Subsetting</span></a></h3>
<pre class="shiki glypht-css-variables" style="background-color:var(--hl-background);color:var(--hl-foreground)" tabindex="0"><code class="language-javascript"><span class="line"><span style="color:var(--hl-keyword)">import</span><span style="color:var(--hl-foreground)"> { </span><span style="color:var(--hl-variable)">GlyphtContext</span><span style="color:var(--hl-foreground)"> } </span><span style="color:var(--hl-keyword)">from</span><span style="color:var(--hl-string)"> '@glypht/core'</span><span style="color:var(--hl-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-comment)">// Create a context for font processing</span></span>
<span class="line"><span style="color:var(--hl-keyword)">const</span><span style="color:var(--hl-variable)"> context</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> new</span><span style="color:var(--hl-function)"> GlyphtContext</span><span style="color:var(--hl-foreground)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-keyword)">try</span><span style="color:var(--hl-foreground)"> {</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // Load font file(s)</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> fontData</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> new</span><span style="color:var(--hl-function)"> Uint8Array</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-comment)">/* your font file data */</span><span style="color:var(--hl-foreground)">);</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> fonts</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> await</span><span style="color:var(--hl-variable)"> context</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">loadFonts</span><span style="color:var(--hl-foreground)">(</span></span>
<span class="line"><span style="color:var(--hl-foreground)">        [</span><span style="color:var(--hl-variable)">fontData</span><span style="color:var(--hl-foreground)">],</span></span>
<span class="line"><span style="color:var(--hl-foreground)">        {</span><span style="color:var(--hl-variable)">transfer:</span><span style="color:var(--hl-keyword)"> true</span><span style="color:var(--hl-foreground)">} </span><span style="color:var(--hl-comment)">/* Transfer the font data to the worker thread */</span></span>
<span class="line"><span style="color:var(--hl-foreground)">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-comment)">    // Subset the font</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> subsettedFont</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> await</span><span style="color:var(--hl-variable)"> fonts</span><span style="color:var(--hl-foreground)">[</span><span style="color:var(--hl-number)">0</span><span style="color:var(--hl-foreground)">].</span><span style="color:var(--hl-function)">subset</span><span style="color:var(--hl-foreground)">({</span></span>
<span class="line"><span style="color:var(--hl-variable)">        axisValues:</span><span style="color:var(--hl-foreground)"> [</span></span>
<span class="line"><span style="color:var(--hl-foreground)">            {</span><span style="color:var(--hl-variable)">type:</span><span style="color:var(--hl-string)"> 'single'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">tag:</span><span style="color:var(--hl-string)"> 'wdth'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">value:</span><span style="color:var(--hl-number)"> 100</span><span style="color:var(--hl-foreground)">}, </span><span style="color:var(--hl-comment)">// Pin the width axis to 100</span></span>
<span class="line"><span style="color:var(--hl-foreground)">            {</span><span style="color:var(--hl-variable)">type:</span><span style="color:var(--hl-string)"> 'variable'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">tag:</span><span style="color:var(--hl-string)"> 'wght'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">value:</span><span style="color:var(--hl-foreground)"> {</span><span style="color:var(--hl-variable)">min:</span><span style="color:var(--hl-number)"> 400</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">max:</span><span style="color:var(--hl-number)"> 700</span><span style="color:var(--hl-foreground)">}} </span><span style="color:var(--hl-comment)">// Clamp the weight axis between 400 and 700</span></span>
<span class="line"><span style="color:var(--hl-foreground)">        ],</span></span>
<span class="line"><span style="color:var(--hl-variable)">        unicodeRanges:</span><span style="color:var(--hl-foreground)"> {</span></span>
<span class="line"><span style="color:var(--hl-variable)">            named:</span><span style="color:var(--hl-foreground)"> [</span><span style="color:var(--hl-string)">'latin'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-string)">'latin-ext'</span><span style="color:var(--hl-foreground)">], </span><span style="color:var(--hl-comment)">// Include Latin character sets, as defined by Google Fonts</span></span>
<span class="line"><span style="color:var(--hl-variable)">            custom:</span><span style="color:var(--hl-foreground)"> [] </span><span style="color:var(--hl-comment)">// No custom Unicode ranges</span></span>
<span class="line"><span style="color:var(--hl-foreground)">        }</span></span>
<span class="line"><span style="color:var(--hl-foreground)">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-variable)">    console</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">log</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-string)">'Original size:'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">fontData</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-variable)">length</span><span style="color:var(--hl-foreground)">);</span></span>
<span class="line"><span style="color:var(--hl-variable)">    console</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">log</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-string)">'Subsetted size:'</span><span style="color:var(--hl-foreground)">, </span><span style="color:var(--hl-variable)">subsettedFont</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-variable)">data</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-variable)">length</span><span style="color:var(--hl-foreground)">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-comment)">    // If the context is long-lived, you can free individual fonts from it</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    for</span><span style="color:var(--hl-foreground)"> (</span><span style="color:var(--hl-keyword)">const</span><span style="color:var(--hl-variable)"> font</span><span style="color:var(--hl-keyword)"> of</span><span style="color:var(--hl-variable)"> fonts</span><span style="color:var(--hl-foreground)">) {</span></span>
<span class="line"><span style="color:var(--hl-variable)">        font</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">destroy</span><span style="color:var(--hl-foreground)">();</span></span>
<span class="line"><span style="color:var(--hl-foreground)">    }</span></span>
<span class="line"><span style="color:var(--hl-foreground)">} </span><span style="color:var(--hl-keyword)">finally</span><span style="color:var(--hl-foreground)"> {</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // Clean up. When running in non-browser environments, this terminates</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // worker threads, allowing the process to exit.</span></span>
<span class="line"><span style="color:var(--hl-variable)">    context</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">destroy</span><span style="color:var(--hl-foreground)">();</span></span>
<span class="line"><span style="color:var(--hl-foreground)">}</span></span>
<span class="line"></span></code></pre>
<h3 id="compression" tabindex="-1"><a class="header-anchor" href="#compression"><span>Compression</span></a></h3>
<pre class="shiki glypht-css-variables" style="background-color:var(--hl-background);color:var(--hl-foreground)" tabindex="0"><code class="language-javascript"><span class="line"><span style="color:var(--hl-keyword)">import</span><span style="color:var(--hl-foreground)"> { </span><span style="color:var(--hl-variable)">WoffCompressionContext</span><span style="color:var(--hl-foreground)"> } </span><span style="color:var(--hl-keyword)">from</span><span style="color:var(--hl-string)"> '@glypht/core'</span><span style="color:var(--hl-foreground)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-comment)">// Create a compression context</span></span>
<span class="line"><span style="color:var(--hl-keyword)">const</span><span style="color:var(--hl-variable)"> compressor</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> new</span><span style="color:var(--hl-function)"> WoffCompressionContext</span><span style="color:var(--hl-foreground)">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-keyword)">try</span><span style="color:var(--hl-foreground)"> {</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // Compress TTF to WOFF2</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> ttfData</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-foreground)"> [</span></span>
<span class="line"><span style="color:var(--hl-keyword)">        new</span><span style="color:var(--hl-function)"> Uint8Array</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-comment)">/* your TTF font data */</span><span style="color:var(--hl-foreground)">),</span></span>
<span class="line"><span style="color:var(--hl-keyword)">        new</span><span style="color:var(--hl-function)"> Uint8Array</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-comment)">/* your TTF font data */</span><span style="color:var(--hl-foreground)">),</span></span>
<span class="line"><span style="color:var(--hl-keyword)">        new</span><span style="color:var(--hl-function)"> Uint8Array</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-comment)">/* your TTF font data */</span><span style="color:var(--hl-foreground)">),</span></span>
<span class="line"><span style="color:var(--hl-foreground)">    ];</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // This will compress the fonts in parallel using 3 worker threads (or fewer, if there are fewer than 3 cores)</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> woff2Data</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> await</span><span style="color:var(--hl-string)"> Promise</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">all</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">ttfData</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">map</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">fileData</span><span style="color:var(--hl-keyword)"> =></span><span style="color:var(--hl-variable)"> compressor</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">compressFromTTF</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">fileData</span><span style="color:var(--hl-foreground)">, {</span></span>
<span class="line"><span style="color:var(--hl-variable)">        algorithm:</span><span style="color:var(--hl-string)"> 'woff2'</span><span style="color:var(--hl-foreground)">,</span></span>
<span class="line"><span style="color:var(--hl-variable)">        level:</span><span style="color:var(--hl-number)"> 11</span><span style="color:var(--hl-foreground)">,</span></span>
<span class="line"><span style="color:var(--hl-variable)">        transfer:</span><span style="color:var(--hl-keyword)"> true</span><span style="color:var(--hl-comment)"> // Transfer the font data to the worker thread</span></span>
<span class="line"><span style="color:var(--hl-foreground)">    })));</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--hl-comment)">    // Decompress back to TTF</span></span>
<span class="line"><span style="color:var(--hl-keyword)">    const</span><span style="color:var(--hl-variable)"> decompressed</span><span style="color:var(--hl-operator)"> =</span><span style="color:var(--hl-keyword)"> await</span><span style="color:var(--hl-string)"> Promise</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">all</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">woff2Data</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">map</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">fileData</span><span style="color:var(--hl-keyword)"> =></span></span>
<span class="line"><span style="color:var(--hl-variable)">        compressor</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">decompressToTTF</span><span style="color:var(--hl-foreground)">(</span><span style="color:var(--hl-variable)">fileData</span><span style="color:var(--hl-foreground)">, {</span><span style="color:var(--hl-variable)">transfer:</span><span style="color:var(--hl-keyword)"> true</span><span style="color:var(--hl-foreground)">})));</span></span>
<span class="line"><span style="color:var(--hl-foreground)">} </span><span style="color:var(--hl-keyword)">finally</span><span style="color:var(--hl-foreground)"> {</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // Clean up. When running in non-browser environments, this terminates</span></span>
<span class="line"><span style="color:var(--hl-comment)">    // worker threads, allowing the process to exit.</span></span>
<span class="line"><span style="color:var(--hl-variable)">    compressor</span><span style="color:var(--hl-foreground)">.</span><span style="color:var(--hl-function)">destroy</span><span style="color:var(--hl-foreground)">();</span></span>
<span class="line"><span style="color:var(--hl-foreground)">}</span></span>
<span class="line"></span></code></pre>
<h2 id="technical-details" tabindex="-1"><a class="header-anchor" href="#technical-details"><span>Technical Details</span></a></h2>
<p>This library uses WebAssembly-compiled versions of:</p>
<ul>
<li><a href="https://harfbuzz.github.io/">HarfBuzz</a> for font subsetting</li>
<li><a href="https://github.com/google/woff2">WOFF2</a> reference implementation for WOFF2 compression</li>
<li><a href="https://github.com/google/zopfli">Zopfli</a> for WOFF compression (via <a href="https://github.com/bramstein/sfnt2woff-zopfli">sfnt2woff-zopfli</a>)</li>
</ul>
</div></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Enumerations"><span class="icon icon-arrow-down"></span><h2>Enumerations</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="axisvalueformat"><span class="tsd-member-summary-name"><a class="" href="../enums/_glypht_core.AxisValueFormat.html">AxisValueFormat</a><a href="#axisvalueformat" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvalueflags"><span class="tsd-member-summary-name"><a class="" href="../enums/_glypht_core.AxisValueFlags.html">AxisValueFlags</a><a href="#axisvalueflags" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Classes"><span class="icon icon-arrow-down"></span><h2>Classes</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="woffcompressioncontext"><span class="tsd-member-summary-name"><a class="" href="../classes/_glypht_core.WoffCompressionContext.html">WoffCompressionContext</a><a href="#woffcompressioncontext" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="glyphtcontext"><span class="tsd-member-summary-name"><a class="" href="../classes/_glypht_core.GlyphtContext.html">GlyphtContext</a><a href="#glyphtcontext" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Type Aliases"><span class="icon icon-arrow-down"></span><h2>Type Aliases</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="compressoptions"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.CompressOptions.html">CompressOptions</a><a href="#compressoptions" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="decompressoptions"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.DecompressOptions.html">DecompressOptions</a><a href="#decompressoptions" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="loadfontsoptions"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.LoadFontsOptions.html">LoadFontsOptions</a><a href="#loadfontsoptions" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisinfo"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisInfo.html">AxisInfo</a><a href="#axisinfo" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsetaxisinfo"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsetAxisInfo.html">SubsetAxisInfo</a><a href="#subsetaxisinfo" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="stylevalue"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.StyleValue.html">StyleValue</a><a href="#stylevalue" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="featureinfo"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.FeatureInfo.html">FeatureInfo</a><a href="#featureinfo" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="namedinstance"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.NamedInstance.html">NamedInstance</a><a href="#namedinstance" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="stylekey"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.StyleKey.html">StyleKey</a><a href="#stylekey" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="stylevalues"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.StyleValues.html">StyleValues</a><a href="#stylevalues" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="sfntversion"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SfntVersion.html">SfntVersion</a><a href="#sfntversion" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="designaxisrecord"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.DesignAxisRecord.html">DesignAxisRecord</a><a href="#designaxisrecord" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvaluesingle"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisValueSingle.html">AxisValueSingle</a><a href="#axisvaluesingle" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvaluerange"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisValueRange.html">AxisValueRange</a><a href="#axisvaluerange" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvaluelinked"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisValueLinked.html">AxisValueLinked</a><a href="#axisvaluelinked" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvaluemultiple"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisValueMultiple.html">AxisValueMultiple</a><a href="#axisvaluemultiple" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="axisvalue"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.AxisValue.html">AxisValue</a><a href="#axisvalue" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="styleattributes"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.StyleAttributes.html">StyleAttributes</a><a href="#styleattributes" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsettedfont"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsettedFont.html">SubsettedFont</a><a href="#subsettedfont" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsetinfo"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsetInfo.html">SubsetInfo</a><a href="#subsetinfo" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsetaxissetting"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsetAxisSetting.html">SubsetAxisSetting</a><a href="#subsetaxissetting" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsetsettings"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsetSettings.html">SubsetSettings</a><a href="#subsetsettings" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="fontref"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.FontRef.html">FontRef</a><a href="#fontref" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="subsetname"><span class="tsd-member-summary-name"><a class="" href="../types/_glypht_core.SubsetName.html">SubsetName</a><a href="#subsetname" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open=""><summary class="tsd-accordion-summary" data-key="section-Variables"><span class="icon icon-arrow-down"></span><h2>Variables</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="subset_names"><span class="tsd-member-summary-name"><a class="" href="../variables/_glypht_core.SUBSET_NAMES.html">SUBSET_NAMES</a><a href="#subset_names" aria-label="Permalink" class="tsd-anchor-icon"><span class="icon icon-link"></span></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div></div></div></div>
        </div>
    </body>
</html>
